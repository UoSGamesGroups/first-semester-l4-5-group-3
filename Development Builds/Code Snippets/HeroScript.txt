using UnityEngine;
using System.Collections;
using UnityEngine.UI;

public class HeroController : MonoBehaviour {

	public Rigidbody2D thisRigidbody; //allows us to move the character
	public float jumpSpeed = 5; //how high or fast you jump
	public float speed = 5; //how fast the character is (you can easily adjust if you feel it's too slow or fast)
	private bool grounded = true; //only enables character to jump if they are already touching the ground
	public int heroScore =0; //initialises the score and updates the score
	public Text scoreText; //tells the engine that the score is a text


	// Use this for initialization
	void Start() { }

	// Update is called once per frame
	void Update() { }

	void FixedUpdate() //Update is called in spite of lag 
	{
		var move = new Vector3(Input.GetAxis("Horizontal"), 0, 0);
		transform.position += move * speed * Time.deltaTime; //"A" or left arrow: move is -1, "D" or right arrow: move is +1

		if (Input.GetKey(KeyCode.UpArrow) && grounded == true) //if the up arrow is pressed and the hero is on the ground
		{
			grounded = false;
			thisRigidbody.velocity = new Vector3(0, jumpSpeed, 0); //if the hero is not on the ground then grounded will equal "false" and therefore the jumpSpeed will not change
		}
	}

	void OnCollisionEnter2D(Collision2D col)
	{
		if (col.gameObject.tag == ("BLOCK")) //if the Hero is in contact with any sprite from the tag "BLOCK" then grounded will equal "true"
		{
			grounded = true;
		}

		if (col.gameObject.tag == ("ITEM")) //if the Hero is in contact with any sprite from the tag "ITEM" then destroy the object
		{
			Destroy (col.gameObject); //this destroys the item so you can't collect it twice. 
			heroScore += 1;
			scoreText.text = "SCORE: " + heroScore.ToString (); //this updates the score everytime you collect an item. 
			
            //When applying the code, you need to make sure that the tags are the same so for the blocks/ground you walk on, they are linked with 'BLOCK;
            //and the character is called HERO and ensure that all characters have a rigid body. 
		}
	}
}